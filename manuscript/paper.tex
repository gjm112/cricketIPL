% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  12pt,
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newlength{\cslentryspacingunit} % times entry-spacing
\setlength{\cslentryspacingunit}{\parskip}
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1
  \let\oldpar\par
  \def\par{\hangindent=\cslhangindent\oldpar}
  \fi
  % set entry spacing
  \setlength{\parskip}{#2\cslentryspacingunit}
 }%
 {}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}
\usepackage{setspace} \usepackage{amssymb} \usepackage{amsmath} \setstretch{1.15} \usepackage{float} \floatplacement{figure}{t}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  colorlinks=true,
  linkcolor={cyan},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={cyan},
  pdfcreator={LaTeX via pandoc}}

\title{~\Large A Comparison of Batter Performance and League Quality
Across Domestic T-20 Cricket Leagues}
\author{\large Matthew Stuart\(^{1,2}\), Hassan Raffique\(^{3}\), Leigha
DeRango\(^{1,2}\)\\
\large Gregory J. Matthews\(^{1,2}\)\\
\vspace{-1.1mm}\\
\large \(^1\) Department of Mathematics and Statistics, Loyola
University Chicago, Chicago, IL, USA \vspace{-1.1mm}\\
\large \(^2\) Center for Data Science and Consulting, Loyola University
Chicago, Chicago, IL, USA \vspace{-1.1mm}\\
\large \(^3\) Syracuse University, Syracuse, NY, USA \vspace{-1.1mm}\\
\large \(^+\) Corresponding:
\href{mailto:mstuart1@luc.edu}{\nolinkurl{mstuart1@luc.edu}}
\vspace{-1.1mm}}
\date{}

\begin{document}
\maketitle
\begin{abstract}
Wicked Googly \vspace{2mm}\\
\emph{Keywords}: Cricket
\end{abstract}

\newcommand{\iid}{\overset{iid}{\sim}}

Abstract:

This paper investigates batter performance across major domestic
Twenty20 (T20) cricket leagues to understand how player effectiveness
varies by competition context. Using a comprehensive dataset comprising
individual match-level batting records from the Indian Premier League
(IPL), Big Bash League (BBL), Caribbean Premier League (CPL), Pakistani
Super League (PSL), and South Africa 20 (SAT), we fit a multinomial
regression model for the number of runs scored per bowled ball
accounting for batter and league conditions as well as in-match effects.
A hierarchical modeling framework utilizing a Bayesian framework is
employed to quantify both player-specific ability and league-specific
correlations, allowing for quantifiable player comparisons across
leagues and the estimation of league-adjusted performance ratings. Our
findings will offer insights into talent evaluation and the
transferability of performance across T20 competitions.

\newpage

\hypertarget{sec:intro}{%
\section{Introduction}\label{sec:intro}}

openWAR and cricWAR.

In the game of cricket, the number of runs scored on a particular pitch
typically ranges between 0 and 6 (though theoretically values larger
than 6 are possible, they are rare and do not occur at all in our
particular data set).

\hypertarget{sec:data}{%
\section{Data}\label{sec:data}}

\begin{longtable}[]{@{}rrrrrr@{}}
\toprule\noalign{}
year & BBL & IPL & CPL & PSL & SAT \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
2011 & 8 & 10 & NA & NA & NA \\
2012 & 8 & 9 & NA & NA & NA \\
2013 & 8 & 9 & 6 & NA & NA \\
2014 & 8 & 8 & 6 & NA & NA \\
2015 & 8 & 8 & 6 & 5 & NA \\
2016 & 8 & 8 & 6 & 5 & NA \\
2017 & 8 & 8 & 6 & 6 & NA \\
2018 & 8 & 8 & 6 & 6 & NA \\
2019 & 8 & 8 & 6 & 6 & NA \\
2020 & 8 & 8 & 6 & 6 & NA \\
2021 & 8 & 8 & 6 & 6 & NA \\
2022 & 8 & 10 & 6 & 6 & 6 \\
2023 & 8 & 10 & 6 & 6 & 6 \\
2024 & NA & 10 & 6 & NA & NA \\
\end{longtable}

We have data from the Indian Premier League (IPL), Big Bash League
(BBL), Caribbean Premier League (CPL), Pakistani Super League (PSL), and
South Africa 20 (SAT), consisting of 515486 balls thrown, providing
\(L = 5\) leagues worth of data. From 2015 - 2021, the IPL, the longest
running T20 league, had 8 teams followed by 10 teams in the 2022 season.
In addition, the SAT was first contested in the 2022-2023 season.

\begin{longtable}[]{@{}rrrrrr@{}}
\toprule\noalign{}
year & BBL & CPL & IPL & PSL & SAT \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
2011 & 6459 & NA & 17013 & NA & NA \\
2012 & 6383 & NA & 17767 & NA & NA \\
2013 & 7853 & 5385 & 18152 & NA & NA \\
2014 & 7816 & 6314 & 14288 & NA & NA \\
2015 & 7586 & 7268 & 13641 & 5413 & NA \\
2016 & 8259 & 6785 & 14096 & 5418 & NA \\
2017 & 10263 & 7708 & 13849 & 7728 & NA \\
2018 & 13576 & 7890 & 14286 & 8077 & NA \\
2019 & 13503 & 8064 & 14293 & 6144 & NA \\
2020 & 14125 & 7308 & 14510 & 4289 & NA \\
2021 & 14234 & 8042 & 14413 & 12978 & NA \\
2022 & 14168 & 7349 & 17912 & 8209 & 7392 \\
2023 & 9277 & 7233 & 17863 & 7806 & 7400 \\
2024 & NA & 2598 & 17103 & NA & NA \\
\end{longtable}

Runs in cricket are either scored by running back and forth between the
wickets once the ball is put into play (generally resulting in 1 or 2
runs, but theoretically any value is possible). In addition, a ball that
is hit in the air over the boundary (termed a ``boundary'') is worth 6
runs and if the ball rolls to the boundary or bounces in the field of
play and then clears the boundary this is worth 4 runs (termed a
``boundary 4''). As a result the distribution of runs scored on a a
particular pitch has large peaks are 0 and 1 with a big drop off from 1
to 2. Values of 3 and 5 are extremely rare accounting for only 0.4\% and
0.02\% of values across all pitches in our data set. Values of 4 and 6
spike because of boundaries and boundary fours and together account for
15.82\% of all values.

\begin{figure}

{\centering \includegraphics{paper_files/figure-latex/bar-1} 

}

\caption{Bar Plot of the number of runs scored of a particular ball}\label{fig:bar}
\end{figure}

\hypertarget{sec:models}{%
\section{Models}\label{sec:models}}

Figure \ref{fig:bar} displays a histogram of the number of runs scored
per ball in IPL, BBL, CPL, PSL, and SAT matches from 2011-2024,
consisting of \(n = 515,486\) balls thrown. It is likely that a
distribution used for modelling counts, such as the Poisson
distribution, will violate the necessary assumptions. For this reason,
we treat this as a classification problem and fit the number of runs
scored per ball, \(Y_i\), by a multinomial distribution. In addition, we
exclude any balls that scored three or five runs because of their
prementioned rarity of occuring. Thus, we are left with a dataset
consisting of \(n = 513,343\) balls thrown.

We utilize a mixed effects model, incorporating fixed effects for the
general in-match situations as well as random effects for the
variability of the bowler, batter, and runner. Denote \(Y_i\) as the
number of runs scored on ball \(i = 1,\dots,n\) and \(\boldsymbol{X}_i\)
as the vector of covariates for the fixed effects of ball \(i\). Table
@ref(tab:covariates) provides a description of the covariates for the
fixed effects of our model. The model is specified with four logit
transformations relative to the event \(Y_i = 0\), or, written
explicitly \begin{equation}
\log\left(\frac{P(Y_i = k | \boldsymbol{X}_i)}{P(Y_i = 0 | \boldsymbol{X}_i)}\right) = \boldsymbol{X}_i \boldsymbol{\beta}_k + u_{k, b_it_il_i} \label{model}
\end{equation} for \(k \in \{1,2,4,6\}\) where \(\boldsymbol{\beta}_k\)
is the fixed effect for scoring \(k\) runs and \(u_{k,b_it_il_i}\), is
the random effect for the batter(\(b_i\)), year(\(t_i\)), and
league(\(l_i\)) for ball \(i\), respectively. For the distribution of
the random effects, we denote
\(\boldsymbol{u}_{k,bt} = [u_{K,bt1},\cdots,u_{K,btL}]^T\) as the
\(L \times 1\) vector of the random effects for batter
\(b = 1,\cdots,B\) and \(t = 1,\dots,T\). To encapsulate the
between-league correlation of random effects as well as year-to-year
autocorrelation, we model the random effects for each \(b\) via a
multivariate AR1 process. More specifically, for each
\(k \in \{1,2,4,6\}\), we set \begin{align}
\boldsymbol{u}_{k,bt} & \sim \mathcal{N}(\Phi_k\boldsymbol{u}_{k,b(t-1)},Q_k), \nonumber \\ 
\boldsymbol{u}_{k,b1} & \sim \mathcal{N}(0,\Sigma_k)\\label{ranefs}\\
\end{align}

for \(t = 2,\cdots,T\) where \(\Phi_k = [\phi_{k,1},\cdots,\phi_{k,L}]\)
and \(\Sigma_k = \Phi_k^{-1}Q_k\Phi_k^{-1}\), ensuring that the model
for \(\boldsymbol{u}_{k,bt}\) is second-order stationary.

Given the size of the random effects and that we have 116 fixed effects
in our dataset, the size of our free, unknown parameter vector
\(\boldsymbol{\Theta} = \{\boldsymbol{\beta}_k, \boldsymbol{u}_k,Q_k,\Phi_k: k \in \{1,2,4,6\}\}\)
is 24588. To handle such a large parameter vector as well as the
complicated structure of our model, we perform a Bayesian analysis on
the data with prior distributions and sampling procedure outlined in the
supplemental file.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.1975}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.8025}}@{}}
\caption{Description of covariates for fixed effects of
model}\tabularnewline
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Variable
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Variable.Description
\end{minipage} \\
\midrule\noalign{}
\endfirsthead
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Variable
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Variable.Description
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
First Innings & Indicator for the 1st innings of the match \\
Balls Remaining & Number of balls remaining in the innings \\
Runs to Win & Number of runs remaining to score to win the match (2nd
innings) \\
Runs Scored & Number of runs scored in the innings up to current ball \\
Wickets Lost & Number of wickets lost in the innings up to current
ball \\
Venue & Grounds in which the match is played \\
\end{longtable}

\hypertarget{sec:results}{%
\section{Results}\label{sec:results}}

\hypertarget{sec:conclusions}{%
\section{Discussion, Future work and
conclusions}\label{sec:conclusions}}

\hypertarget{acknowledgements}{%
\section*{Acknowledgements}\label{acknowledgements}}
\addcontentsline{toc}{section}{Acknowledgements}

\hypertarget{supplementary-material}{%
\section*{Supplementary Material}\label{supplementary-material}}
\addcontentsline{toc}{section}{Supplementary Material}

All code for reproducing the analyses in this paper is publicly
available at \url{https://github.com/gjm112/cricketIPL}

\hypertarget{bayesian-priors-and-posterior-sampling}{%
\subsection{Bayesian priors and posterior
sampling}\label{bayesian-priors-and-posterior-sampling}}

In the data analysis outlined in Section \ref{sec:models} of the main
manuscript, we set the following prior distributions for the fixed
effects \(\boldsymbol{\beta}_k\) for \(y \in \{1,2,4,6\}\) as well as
the variance components of the random effects: \(\Phi_k\) and \(Q_k\).
For ease of use, we decompose
\(Q_k = \boldsymbol{\tau}_k R_k\boldsymbol{\tau}_k\) where
\(\boldsymbol{\tau}_k = diag([\tau_{k1},\cdots,\tau_{kl}]^T)\), the
vector of standard deviations and \(R_k\) is the associated correlation
matrix. \begin{align}
  \beta_{k,p} & \overset{iid}{\sim}\mathcal{N}(0,5),
  \tau_{k,l} & \overset{iid}{\sim}\mathcal{N}(0,1)I(\tau_{k,l} > 0),
  \phi_{k,l} & \overset{iid}{\sim}\mathcal{N}(1,1)I(-1 < \phi_{k,l} < 1),
  R_k & \overset{iid}{\sim}LKJ(2),
\end{align} for \(p = 1,\dots,116\), where LKJ is the
Lewandowski-Kurowicka-Joe distribution for correlation matrices
(Lewandowski, Kurowicka, and Joe (\protect\hyperlink{ref-LKJ}{2009})).
We update the model parameters
\(\{\boldsymbol{\beta}_k,\boldsymbol{\tau}_k,R_k,\Phi_k: k \in \{1,2,4,6\}\}\)
individually using a Metropolis-adjusted Langevin algorithm (MALA). MALA
is a version of a Metropolis Hastings algorithm where the new states are
proposed using overdamped Langevin dynamics. More specifically, at step
\(r\) of the algorithm, for each parameter \(\boldsymbol{\Theta}\), we
sample a proposal
\[\boldsymbol{\Theta}^* \sim \mathcal{N}\left(\boldsymbol{\Theta}_r + a\nabla \log \pi(\boldsymbol{\Theta}_r|\boldsymbol{y},\boldsymbol{X}), \sqrt{2a}\right)\]
where \(\pi\) is the functional form of the posterior distribution for
\(\boldsymbol{\Theta}\) and \(a\) is a tuning parameter for the proposal
distribution. The tuning paramter \(a\) is chosen via an adaptation of
the primal-dual algorithm from Nesterov
(\protect\hyperlink{ref-Nesterov2009}{2009}), which was also utilized in
Homan and Gelman (\protect\hyperlink{ref-NUTS}{2014}), to obtain an
acceptance probability of 0.574.

\hypertarget{references}{%
\section*{References}\label{references}}
\addcontentsline{toc}{section}{References}

\hypertarget{refs}{}
\begin{CSLReferences}{1}{0}
\leavevmode\vadjust pre{\hypertarget{ref-NUTS}{}}%
Homan, Matthew D., and Andrew Gelman. 2014. {``The No-u-Turn Sampler:
Adaptively Setting Path Lengths in Hamiltonian Monte Carlo.''} \emph{J.
Mach. Learn. Res.} 15 (1): 1593--623.

\leavevmode\vadjust pre{\hypertarget{ref-LKJ}{}}%
Lewandowski, Daniel, Dorota Kurowicka, and Harry Joe. 2009.
{``Generating Random Correlation Matrices Based on Vines and Extended
Onion Method.''} \emph{Journal of Multivariate Analysis} 100 (9):
1989--2001.
https://doi.org/\url{https://doi.org/10.1016/j.jmva.2009.04.008}.

\leavevmode\vadjust pre{\hypertarget{ref-Nesterov2009}{}}%
Nesterov, Yurii. 2009. {``Primal-Dual Subgradient Methods for Convex
Problems.''} \emph{Mathematical Programming} 120: 221--59.
\url{https://doi.org/10.1007/s10107-007-0149-x}.

\end{CSLReferences}

\end{document}
